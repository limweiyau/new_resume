@charset "UTF-8";

/* =====================================================================
   Wei Yau — styles.css (Refactored, dynamic scaling, Aug 2025)
   - Goals: cleaner tokens, dynamic clamp() sizing, stable fixed nav,
            responsive orbit rings, reduced-motion safety.
   - Safe to drop-in replace your current styles.css.
   ===================================================================== */

/* =====================================================================
   0) GLOBAL CONFIGURATION TABLE
   ---------------------------------------------------------------------
   Notes on numeric scales:
   • Values marked 0..1 are normalized controls:
     0 = "none", 1 = "maximum" (linear scale unless noted).
   • Tweak tokens below; components read from these.
   ===================================================================== */

:root{
  /* ---------- Theme Colors ---------- */
  --bg: #070b14;
  --text: #dfe7ff;
  --muted: #9fb3ff;
  --accent: #8ad3ff;
  --accent-2: #a18bff;

  /* ---------- Layout ---------- */
  --container-w: 1700px;                       /* max content width */
  --container-pad: clamp(16px, 6vw, 56px);     /* side breathing room */
  --nav-h: 72px;                               /* fixed nav height */
  --section-pad-min: 40px;
  --section-pad-vh: 5vh;
  --section-pad-max: 56px;
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;

  /* ---------- Surfaces and Panels ---------- */
  --panel-alpha: 0.06;        /* 0..1 lower = more transparent */
  --panel-border-alpha: 0.08; /* 0..1 lower = subtler border */
  --panel-blur: 8px;          /* backdrop blur strength; can be 0 for none */

  /* ---------- Glow System (controlled by level 0..1) ---------- */
  --glow-level: 0.75;            /* 0..1 master glow strength */
  --glow1-color: 138,211,255;    /* rgb triplet for glow ring 1 */
  --glow2-color: 161,139,255;    /* rgb triplet for glow ring 2 */
  --glow1-blur-max: 24px;        /* blur at level = 1 for inner glow ring */
  --glow2-blur-max: 64px;        /* blur at level = 1 for outer glow ring */
  --glow1-alpha-max: 0.35;       /* alpha at level = 1 for inner ring */
  --glow2-alpha-max: 0.25;       /* alpha at level = 1 for outer ring */
  /* Derived glow values (do not edit normally) */
  --_glow1-blur: calc(var(--glow1-blur-max) * var(--glow-level));
  --_glow2-blur: calc(var(--glow2-blur-max) * var(--glow-level));
  --_glow1-a: calc(var(--glow1-alpha-max) * var(--glow-level));
  --_glow2-a: calc(var(--glow2-alpha-max) * var(--glow-level));
  --glow:
    0 0 var(--_glow1-blur) rgba(var(--glow1-color), var(--_glow1-a)),
    0 0 var(--_glow2-blur) rgba(var(--glow2-color), var(--_glow2-a));

  /* ---------- Accent Gradient (used widely) ---------- */
  --accent-gradient: linear-gradient(90deg, var(--accent), var(--accent-2));

  /* ---------- Motion and Interactions ---------- */
  --motion-scale: 1;                  /* 0..1 overall animation intensity */
  --hover-lift: calc(3px * var(--motion-scale));
  --ui-ease: 160ms;                   /* standard micro-interaction timing */

  /* ---------- Scroll Progress Bar ---------- */
  --progress-h: 3px;

  /* ---------- Hero and Orbits ---------- */
  --hero-minvh: 85vh;                 /* min height of hero area */
  /* Ring sizes (now responsive via clamp + vw) */
  --ring-0-size: clamp(18rem, 52vw, 28rem);
  --ring-1-size: clamp(14rem, 40vw, 21rem);
  --ring-2-size: clamp(10rem, 28vw, 16rem);
  /* Ring base speed in seconds; inner rings speed up by a step */
  --ring-0-dur: 38s;
  --ring-1-dur: 34s;
  --ring-2-dur: 30s;
  /* Badge size (responsive) */
  --badge-d: clamp(1.6rem, 2.4vw, 2rem);
  --badge-fs: clamp(0.55rem, 0.9vw, 0.7rem);

  /* ---------- Typography ---------- */
  --font-body: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, Apple Color Emoji, Segoe UI Emoji;
  --h2-min: 24px;
  --h2-vw: 3vw;
  --h2-max: 34px;

  /* ---------- Shadows and Outlines ---------- */
  --outline-alpha: 0.28;

  /* ---------- Misc ---------- */
  --card-back-alpha-top: 0.05;  /* gradient panels: top stop alpha */
  --card-back-alpha-bot: 0.03;  /* gradient panels: bottom stop alpha */

  /* ---------- Nav / Hamburger tuning ---------- */
  --hamb-bar-w: 24px;
  --hamb-bar-h: 2px;
  --hamb-gap: 4px;
  --hamb-hit: 40px; /* touch target */
}

/* =====================================================================
   1) BASE AND RESET
   ===================================================================== */

*{ box-sizing: border-box; }
html, body {
  margin: 0;
  padding: 0;
  height: auto;
  min-height: 100%;
}
/* Keep anchor auto-offset neutral (no synthetic offset that can cause jumps) */
html{ scroll-padding-top: 0 !important; }

body{
  margin: 0;
  font-family: var(--font-body);
  line-height: 1.6;
  color: var(--text);
  background: var(--bg);
  overflow-x: hidden;
  overflow-y: auto;
  padding-top: 0;
}

/* Visually hidden but accessible text */
.sr_only{
  position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden;
  clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0;
}

/* Background canvas behind everything */
#bgCanvas{
  position: fixed; inset: 0; width: 100%; height: 100%;
  z-index: -1; pointer-events: none;
}

/* =====================================================================
   2) SCROLL PROGRESS
   ===================================================================== */

.scroll_progress{
  position: fixed; left: 0; right: 0; top: 0; height: var(--progress-h); z-index: 60;
  background: rgba(255,255,255,0.06);
}
.scroll_progress span{
  display: block; height: 100%; width: 0%;
  background: var(--accent-gradient);
  box-shadow: var(--glow);
  transition: width calc(120ms * var(--motion-scale)) linear;
}

/* =====================================================================
   3) LAYOUT HELPERS
   ===================================================================== */

.container{
  width: min(var(--container-w), calc(100% - (2 * var(--container-pad))));
  margin-inline: auto;
  padding-inline: var(--container-pad);
}
.section{ position: relative; }
.section_pad{
  padding: clamp(var(--section-pad-min), var(--section-pad-vh), var(--section-pad-max)) 0;
}
.section_title{
  font-size: clamp(var(--h2-min), var(--h2-vw), var(--h2-max));
  margin: 0 0 16px 0;
  letter-spacing: 0.5px;
  text-shadow: 0 0 18px rgba(var(--glow1-color), calc(0.25 * var(--glow-level)));
}

/* =====================================================================
   4) NAVIGATION — fixed, drift-proof, mobile-first
   ---------------------------------------------------------------------
   Works with existing HTML:
     <header class="nav" data-state="closed">
       <a class="nav_brand" href="#top">Wei Yau</a>
       <button class="nav_toggle" ...><span/><span/><span/></button>
       <nav id="primary-nav" class="nav_links">...</nav>
     </header>
   --------------------------------------------------------------------- */


/* =====================================================================
   5) HERO AND ORBIT SYSTEM
   ===================================================================== */

.hero{
  min-height: calc(var(--hero-minvh) - var(--nav-h));
  display: grid; place-items: center;
  position: relative; pointer-events: none;
  margin: 0;
  margin-top: calc(var(--nav-h) + 12px);
  padding-top: 0;
}

.orbit-center{ z-index: 11; }

.name{
  margin: 0; white-space: nowrap; position: relative; z-index: 12;
  font-size: clamp(0.9rem, 3vw, 1.6rem);
  font-weight: 800; font-family: Inter, sans-serif; color: #ffffff;
  letter-spacing: 0.05em;
  text-shadow:
    0 0 calc(6px * var(--motion-scale)) rgba(255,246,213,0.675),
    0 0 calc(14px * var(--motion-scale)) rgba(255,246,213,0.525),
    0 0 calc(24px * var(--motion-scale)) rgba(255,173,53,0.45),
    0 0 calc(38px * var(--motion-scale)) rgba(255,184,74,0.6),
    0 0 calc(48px * var(--motion-scale)) rgba(255,184,74,0.45);
  animation: sunGlowPulse calc(6s * var(--motion-scale)) ease-in-out infinite alternate;
}

/* Orbit structure */
.orbit-wrap{ position: relative; width: 0; height: 0; }
.orbit-wrap > li{ position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); }

/* Ring visuals */
.ring-2, .ring-1, .ring-0{
  list-style: none;
  border: 0.5px solid rgba(251,252,201,0.55);
  border-radius: 50%;
  position: relative; margin: 0; padding: 0;
  box-shadow:
    0 0 calc(14px * var(--motion-scale)) #fbfcc9,
    0 0 calc(25px * var(--motion-scale)) rgba(251,252,201,0.35);
  will-change: transform;
}

/* Ring anchors */
.ring-2 > li, .ring-1 > li, .ring-0 > li{
  position: absolute; top: 50%; left: 50%;
  width: 0; height: 0; transform-origin: center;
}

/* Badges kept upright */
.orbit-tag{
  display: flex; align-items: center; justify-content: center;
  width: var(--badge-d); height: var(--badge-d);
  font-size: var(--badge-fs); font-weight: 600;
  text-transform: uppercase; text-align: center; line-height: 1;
  border-radius: 50%;
  background: rgba(255,95,247,0.18);
  box-shadow: 0 0 calc(12px * var(--motion-scale)) rgba(255,95,247,0.8);
  transform: translate(-50%, -50%);
  animation: counterSpin var(--ring-duration, var(--ring-0-dur)) linear infinite;
}

/* Ring sizes, speeds, placement */
.ring-0{ width: var(--ring-0-size); height: var(--ring-0-size); animation: spin var(--ring-0-dur) linear infinite; }
.ring-0 > li > .orbit-tag{ --ring-duration: var(--ring-0-dur); }
.ring-0 > :nth-child(1){ transform: rotate(120deg) translate(calc(var(--ring-0-size) / 2)) rotate(-120deg); }
.ring-0 > :nth-child(2){ transform: rotate(240deg) translate(calc(var(--ring-0-size) / 2)) rotate(-240deg); }
.ring-0 > :nth-child(3){ transform: rotate(360deg) translate(calc(var(--ring-0-size) / 2)) rotate(-360deg); }

.ring-1{ width: var(--ring-1-size); height: var(--ring-1-size); animation: spin var(--ring-1-dur) linear infinite; }
.ring-1 > li > .orbit-tag{ --ring-duration: var(--ring-1-dur); }
.ring-1 > :nth-child(1){ transform: rotate(180deg) translate(calc(var(--ring-1-size) / 2)) rotate(-180deg); }
.ring-1 > :nth-child(2){ transform: rotate(360deg) translate(calc(var(--ring-1-size) / 2)) rotate(-360deg); }

.ring-2{ width: var(--ring-2-size); height: var(--ring-2-size); animation: spin var(--ring-2-dur) linear infinite; }
.ring-2 > li > .orbit-tag{ --ring-duration: var(--ring-2-dur); }
.ring-2 > :nth-child(1){ transform: rotate(360deg) translate(calc(var(--ring-2-size) / 2)) rotate(-360deg); }

/* =====================================================================
   6) COMPONENTS: GLASS, OUTLINES, BUTTONS
   ===================================================================== */

.glass{
  background: rgba(255,255,255, var(--panel-alpha));
  border: 1px solid rgba(255,255,255, var(--panel-border-alpha));
  border-radius: var(--radius-lg);
  box-shadow: var(--glow);
}

.glow_outline{
  box-shadow:
    0 0 0 1px rgba(var(--glow1-color), calc(var(--outline-alpha) * var(--glow-level))),
    var(--glow);
}

/* Buttons and links */
.btn, .btn_ghost{
  display: inline-block; padding: 10px 14px; border-radius: var(--radius-md); text-decoration: none;
  font-weight: 600; font-size: 14px; letter-spacing: 0.2px; cursor: pointer;
}
.btn{
  background: var(--accent-gradient); color: #0d1020; border: 0;
  box-shadow: var(--glow);
}
.btn_ghost{
  color: var(--text); background: transparent;
  border: 1px solid rgba(255,255,255, var(--panel-border-alpha));
}
.btn[aria-disabled="true"]{ opacity: 0.5; pointer-events: none; }

/* =====================================================================
   7) ABOUT SECTION
   ===================================================================== */

.about_grid{
  display: grid;
  gap: 16px;
  grid-template-columns: 1fr 1fr;
  align-items: stretch;
}
@media (max-width: 900px){
  .about_grid{ grid-template-columns: 1fr; }
}

.about_card,
.about_panel{
  padding: 20px;
  border-radius: var(--radius-lg);
  background: rgba(255,255,255, var(--panel-alpha));
  border: 1px solid rgba(255,255,255, var(--panel-border-alpha));
  box-shadow: var(--glow);
}

.about_header{
  display: flex;
  gap: 16px;
  align-items: flex-start;
  margin-bottom: 12px;
}

.about_avatar{
  flex: 0 0 auto;
  width: 56px; height: 56px;
  display: grid; place-items: center;
  font-size: 26px;
  border-radius: 14px;
  background: rgba(255,255,255, var(--panel-alpha));
  border: 1px solid rgba(255,255,255, var(--panel-border-alpha));
  box-shadow: var(--glow);
}

.about_intro{
  margin: 0; color: var(--text); line-height: 1.6;
}

/* Chips */
.chip_row{
  display: flex; flex-wrap: wrap; gap: 8px;
  margin: 6px 0 0; padding: 0;
}
.chip{
  display: inline-block;
  padding: 6px 10px;
  border-radius: var(--radius-sm);
  font-size: 12px; color: var(--text);
  background: linear-gradient(180deg, rgba(var(--glow1-color), 0.18), rgba(var(--glow2-color), 0.18));
  border: 1px solid rgba(255,255,255, var(--panel-border-alpha));
  list-style: none;
}

/* Bulleted list with accent orbs */
.about_subtitle{
  margin: 0 0 10px 0;
  font-size: 18px; font-weight: 700;
  letter-spacing: 0.2px;
}

.list_orbit{ margin: 0; padding: 0; list-style: none; }
.list_orbit li{
  position: relative; padding-left: 18px; margin: 8px 0;
}
.list_orbit--accent li::before{
  content: "";
  position: absolute; left: 0; top: 0.9em;
  width: 8px; height: 8px; border-radius: 50%; transform: translateY(-50%);
  background: var(--accent-gradient);
  box-shadow: 0 0 10px rgba(var(--glow1-color), calc(0.6 * var(--glow-level)));
}

/* =====================================================================
   8) TIMELINE / EXPERIENCES
   ===================================================================== */

.timeline{ list-style: none; margin: 0; padding: 0; position: relative; }
.timeline:before{
  content: ""; position: absolute; left: 18px; top: 0; bottom: 0; width: 2px; background: rgba(255,255,255,0.1);
}
.timeline_item{ position: relative; padding-left: 56px; margin-bottom: 22px; }

.timeline_badge{
  position: absolute; left: 6px; top: 6px; width: 24px; height: 24px;
  display: grid; place-items: center; font-size: 14px;
  background: rgba(255,255,255, var(--panel-alpha));
  border: 1px solid rgba(255,255,255, var(--panel-border-alpha));
  border-radius: var(--radius-md);
  box-shadow: var(--glow);
}

.timeline_card{
  padding: 16px; border-radius: var(--radius-lg);
  background: linear-gradient(180deg,
    rgba(255,255,255, var(--card-back-alpha-top)),
    rgba(255,255,255, var(--card-back-alpha-bot)));
  border: 1px solid rgba(255,255,255, var(--panel-border-alpha));
  font-size: 12px;
}
.timeline_card header{
  display: flex; gap: 10px; align-items: baseline; justify-content: space-between;
}
.timeline_card header h3{ margin: 0; font-size: 18px; }
.timeline_card header .meta{ color: var(--muted); font-size: 13px; }

.timeline_card .xp_header{
  display: flex; align-items: flex-start; justify-content: space-between;
  gap: 12px; margin: 0 0 10px 0;
}
.timeline_card .xp_title{
  display: flex; flex-direction: column; gap: 4px;
}
.timeline_card .xp_role{
  margin: 0; font-size: 18px; line-height: 1.2; font-weight: 800; letter-spacing: 0.2px;
  background: var(--accent-gradient);
  -webkit-background-clip: text; background-clip: text; color: transparent;
}
.timeline_card .xp_company{
  font-size: 14px; color: var(--muted); line-height: 1.3; opacity: 0.95;
}
.timeline_card .xp_years{
  flex: 0 0 auto; align-self: flex-start; display: inline-block;
  padding: 6px 10px; border-radius: var(--radius-sm);
  font-size: 12px; font-weight: 700; letter-spacing: 0.5px;
  color: #0d1020; background: var(--accent-gradient); box-shadow: var(--glow); white-space: nowrap;
}

.timeline_card > p{ margin-top: 6px; }

@media (max-width: 600px){
  .timeline_card .xp_header{ flex-direction: column; align-items: flex-start; gap: 8px; }
  .timeline_card .xp_years{ align-self: auto; }
}

/* =====================================================================
   9) PROJECTS
   ===================================================================== */

.card_grid{ display: grid; gap: 16px; grid-template-columns: repeat(12, 1fr); }
.proj_card{
  grid-column: span 4; padding: 16px; border-radius: var(--radius-lg);
  background: linear-gradient(180deg,
    rgba(255,255,255, var(--card-back-alpha-top)),
    rgba(255,255,255, var(--card-back-alpha-bot)));
  border: 1px solid rgba(255,255,255, var(--panel-border-alpha));
  transition:
    transform calc(150ms * var(--motion-scale)) ease,
    box-shadow calc(150ms * var(--motion-scale)) ease;
}
.proj_card:hover{
  transform: translateY(calc(-1 * var(--hover-lift)));
  box-shadow: 0 8px 30px rgba(0,0,0,0.35), var(--glow);
}
.proj_header{ display: flex; align-items: center; justify-content: space-between; }
.proj_icon{ font-size: 22px; }
.proj_card p{ margin: 10px 0 12px; color: var(--text); }
.proj_actions{ display: flex; gap: 10px; margin-top: 8px; }

@media (max-width: 1100px){ .proj_card{ grid-column: span 6; } }
@media (max-width: 700px){ .proj_card{ grid-column: span 12; } }

/* =====================================================================
   10) CONTACT
   ===================================================================== */

.contact_panel{ padding: 18px; }
.contact_form{ display: grid; gap: 12px; margin-top: 8px; }
.contact_form .field{ display: grid; gap: 6px; }
.contact_form .field span{ font-size: 13px; color: var(--muted); }
.contact_form input, .contact_form textarea{
  width: 100%; padding: 10px 12px; border-radius: var(--radius-md);
  border: 1px solid rgba(255,255,255, var(--panel-border-alpha));
  background: rgba(255,255,255,0.04); color: var(--text);
}
.contact_form textarea{ resize: vertical; }
.contact_notes{ display: flex; gap: 12px; margin-top: 12px; }
.link{ color: var(--accent); text-decoration: none; }

/* =====================================================================
   11) FOOTER
   ===================================================================== */

.site_footer{
  margin-top: 100px;
  padding: 18px 0;
  border-top: 1px solid rgba(255,255,255, var(--panel-border-alpha));
  background: rgba(255,255,255,0.04);
}
.site_footer .container{
  display: flex; align-items: center; justify-content: space-between; gap: 10px;
}
.site_footer p{ margin: 0; color: var(--muted); }
.site_footer .to_top{
  display: inline-grid; place-items: center; width: 36px; height: 36px; border-radius: var(--radius-md);
  text-decoration: none; color: var(--text);
  background: rgba(255,255,255, var(--panel-alpha));
  border: 1px solid rgba(255,255,255, var(--panel-border-alpha));
}

/* =====================================================================
   12) ANIMATIONS
   ===================================================================== */

@keyframes sunGlowPulse{
  from{
    text-shadow:
      0 0 calc(4px * var(--motion-scale)) rgba(255,246,213,0.525),
      0 0 calc(10px * var(--motion-scale)) rgba(255,246,213,0.375),
      0 0 calc(18px * var(--motion-scale)) rgba(255,173,53,0.3),
      0 0 calc(28px * var(--motion-scale)) rgba(255,184,74,0.375),
      0 0 calc(38px * var(--motion-scale)) rgba(255,184,74,0.225);
    transform: scale(1);
  }
  to{
    text-shadow:
      0 0 calc(8px * var(--motion-scale)) rgba(255,246,213,0.75),
      0 0 calc(20px * var(--motion-scale)) rgba(255,246,213,0.675),
      0 0 calc(34px * var(--motion-scale)) rgba(255,173,53,0.6),
      0 0 calc(48px * var(--motion-scale)) rgba(255,184,74,0.675),
      0 0 calc(64px * var(--motion-scale)) rgba(255,184,74,0.6);
    transform: scale(1);
  }
}

@keyframes spin{ to{ transform: rotate(360deg); } }
@keyframes counterSpin{
  from{ transform: translate(-50%, -50%) rotate(0deg); }
  to{   transform: translate(-50%, -50%) rotate(-360deg); }
}

/* =====================================================================
   13) REVEAL AND UTILITIES
   ===================================================================== */

.reveal {
  opacity: 0;
  transform: translateY(10px);
  transition: opacity 0.3s ease, transform 0.3s ease;
  will-change: opacity, transform;
  min-height: 1px;
}
.in_view{
  opacity: 1; transform: none;
  transition:
    opacity calc(280ms * var(--motion-scale)) ease,
    transform calc(280ms * var(--motion-scale)) ease;
}

ul{ list-style: none; margin: 0; padding: 0; }

/* Utility "glass" for any element */
.border_panel{
  background: rgba(255,255,255, var(--panel-alpha));
  border: 1px solid rgba(255,255,255, var(--panel-border-alpha));
  border-radius: var(--radius-lg);
  box-shadow: var(--glow);
}

/* =====================================================================
   14) ACCESSIBILITY / SAFETY GUARDS
   ===================================================================== */

/* Reduce motion when the user prefers it */
@media (prefers-reduced-motion: reduce){
  *{ animation: none !important; transition: none !important; }
}

/* High-contrast mode tweaks (optional, safe default) */
@media (forced-colors: active){
  .glass, .border_panel, .btn, .btn_ghost, .timeline_card, .proj_card{
    box-shadow: none;
  }
}

/* Prevent horizontal overflow artifacts */
html, body { overflow-x: hidden; scrollbar-gutter: stable both-edges; }

/* If anything still forces width via 100vw, constrain it */
img, canvas, video { max-width: 100%; }

/* Safer full-bleed approach than 100vw */
.full-bleed { position: relative; left: 50%; right: 50%; margin-left: -50vw; margin-right: -50vw; width: 100vw; }

/* If you later find a specific offender, clamp it explicitly: */
/* .offender { max-width: 100% !important; } */
